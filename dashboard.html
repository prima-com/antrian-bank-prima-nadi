<!DOCTYPE html>
<html>
<head>
<title>Dashboard Operator</title>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<style>
body{
font-family:Arial;
background:#0f172a;
color:white;
text-align:center;
}

h1{margin:20px}

.box{
display:inline-block;
background:#1e293b;
padding:30px;
margin:20px;
border-radius:15px;
width:250px;
}

button{
padding:15px 30px;
font-size:18px;
border:none;
border-radius:10px;
background:#22c55e;
color:white;
cursor:pointer;
}

button:hover{background:#16a34a}
</style>
</head>

<body>

<h1>DASHBOARD OPERATOR</h1>

<div class="box">
<h2>CS</h2>
<p>Nomor dipanggil: <span id="cs">0</span></p>
<button onclick="panggil('cs')">PANGGIL</button>
</div>

<div class="box">
<h2>TELLER</h2>
<p>Nomor dipanggil: <span id="teller">0</span></p>
<button onclick="panggil('teller')">PANGGIL</button>
</div>

<script>
const firebaseConfig = {
apiKey:"AIzaSyB7f2r5KbTkk-14bc5cXNHEVlV5J1WfMf8",
authDomain:"antrian-bank-prima-nadi.firebaseapp.com",
databaseURL:"https://antrian-bank-prima-nadi-default-rtdb.asia-southeast1.firebasedatabase.app",
projectId:"antrian-bank-prima-nadi"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function panggil(type){
let ref = db.ref("antrian/"+type);
ref.once("value").then(snap=>{
let data = snap.val();
let next = data.current + 1;
if(next <= data.last){
ref.update({current:next});
suara(type,next);
}
});
}

function suara(type,no){
let text = "Nomor "+type+" "+no+" silakan ke loket";
let msg = new SpeechSynthesisUtterance(text);
msg.lang="id-ID";
speechSynthesis.speak(msg);
}

db.ref("antrian/cs/current").on("value",snap=>{
document.getElementById("cs").innerText=snap.val();
});

db.ref("antrian/teller/current").on("value",snap=>{
document.getElementById("teller").innerText=snap.val();
});
</script>

</body>
</html>





















